{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}

{% set total = 0%}

    {% if paniers is not empty %}
        <table class="table">
            <thead>
                <tr>
                    <th>{{ 'panier.Produit.Nom'|trans }}</th>
                    <th>{{ 'panier.Quantite'|trans }}</th>
                    <th>{{ 'panier.Prix'|trans }}</th>
                    <th>{{ 'panier.Montant'|trans }}</th>
                </tr>
            </thead>
            <tbody>
                {% for panier in paniers %}
                    <tr>
                        <td>   
                            {{panier.Produit.Nom}}
                        </td>
                        <td>
                            {{panier.Quantite}}
                        </td>
                        <td>
                            {{panier.Produit.Prix}}
                        </td>
                        <td>
                            {% set count = panier.Produit.Prix * panier.Quantite %}
                            {{count}}
                            {% set total = total + count %}
                        </td>
                        <td>	
                            <a href="{{path('panier_delete', {'id':panier.id})}}" class="btn btn-danger">
                            {{ 'panier.delProd'|trans }}
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <p>{{ 'nbprod'|trans }}: {{paniers|length}}</p>
        <p>{{ 'totpan'|trans }}: {{total}}</p>

    {% else %}
    <p>{{ 'panier.noPan'|trans }}</p>
    {% endif %}

    <h2>{{ 'panier.addProd'|trans }}</h2>
    {{form(ajout_panier)}}
{% endblock %}
